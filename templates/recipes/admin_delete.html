{% extends "recipes/base.html" %}


{% block content %}
<form action="" method="post" enctype="multipart/form-data">
{% csrf_token %}
<div>Search: <input id="search" type="text"> <div class="pure-button" id="searchbtn">Search</div></div>
<table class="pure-table pure-table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Catagory</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
{% for recipe in recipes %}
        <tr class="recipes_delete">
            <td>{{ recipe.id }}</td>
            <td>{{ recipe.Title }}</td>
            <td>{{ recipe.Category }}</td>
            <td>{% if recipe.Deleted %}<input type="checkbox" name="{{ recipe.id }}" checked="checked">{% else %}<input type="checkbox" name="{{ recipe.id }}">{%endif %}</td>
        </tr>
{% endfor %}
    </tbody>
</table>
<button class="button-warning pure-button">Delete</button>

</form>
<script>
var recipes_delete = document.getElementsByClassName("recipes_delete"),
    searchbtn = document.getElementById("searchbtn");
    searchbtn.onclick = function(){
        var search = document.getElementById("search").value;
        for(var i=0; i<recipes_delete.length; i++){
            if( search != ''){
                if( recipes_delete[i].textContent.toLocaleLowerCase().includes(search) )
                    recipes_delete[i].classList.remove('hidden');
                else 
                    recipes_delete[i].classList.add('hidden');
            }else{
                recipes_delete[i].classList.remove('hidden');
            }
        }
    };
</script>
{% endblock %}
